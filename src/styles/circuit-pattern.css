/**
 * Circuit Pattern Background
 *
 * DESIGN GUIDELINES:
 * 1. Traces use VERTICAL and DIAGONAL (45Â°) segments only
 * 2. NO endless vertical lines - traces must turn/branch
 * 3. Lines CANNOT cross each other (would cause short circuit)
 * 4. Branches end in pins (filled circles) at dead ends
 * 5. Pattern tiles seamlessly (256x256px)
 * 6. Traces occupy separate "lanes" to prevent crossing
 *
 * ANIMATION:
 * - Pattern is transparent by default
 * - A diagonal gradient wave slowly sweeps across, revealing the pattern
 * - Wave fades in and out smoothly
 */

:root {
  /* Circuit pattern color - bright magenta (#a000a0) */
  --circuit-color: #a000a0;

  /*
   * Pattern tile: 256x256px
   * Traces in separate lanes - never crossing
   * Lane 1 (x=24), Lane 2 (x=72), Lane 3 (x=128), Lane 4 (x=184), Lane 5 (x=240, wraps edges)
   * Each trace enters at top (y=0) and exits at bottom (y=256) at SAME X position for seamless tiling
   */
  --circuit-pattern: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='256' height='256' viewBox='0 0 256 256'%3E%3Cg fill='none' stroke='%23a000a0' stroke-width='1.2' stroke-linecap='round'%3E%3Cpath d='M24 0 L24 48 L48 72 L48 136 L24 160 L24 256'/%3E%3Cpath d='M24 48 L8 64'/%3E%3Ccircle cx='8' cy='64' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M48 136 L64 152'/%3E%3Ccircle cx='64' cy='152' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M72 0 L72 80 L96 104 L96 176 L72 200 L72 256'/%3E%3Cpath d='M96 104 L112 120'/%3E%3Ccircle cx='112' cy='120' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M72 200 L56 216'/%3E%3Ccircle cx='56' cy='216' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M128 0 L128 32 L152 56 L152 120 L128 144 L128 256'/%3E%3Cpath d='M152 56 L168 72'/%3E%3Ccircle cx='168' cy='72' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M128 144 L112 160'/%3E%3Ccircle cx='112' cy='160' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M184 0 L184 64 L208 88 L208 168 L184 192 L184 256'/%3E%3Cpath d='M208 88 L224 104'/%3E%3Ccircle cx='224' cy='104' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M184 192 L168 208'/%3E%3Ccircle cx='168' cy='208' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M240 0 L240 40 L256 56'/%3E%3Cpath d='M0 56 L16 72 L16 184 L0 200'/%3E%3Cpath d='M256 200 L240 216 L240 256'/%3E%3Cpath d='M16 72 L32 88'/%3E%3Ccircle cx='32' cy='88' r='2.5' fill='%23a000a0'/%3E%3Cpath d='M16 184 L32 200'/%3E%3Ccircle cx='32' cy='200' r='2.5' fill='%23a000a0'/%3E%3C/g%3E%3C/svg%3E");
}

/*
 * Wavy gradient mask for the circuit pattern
 * - Thin center (fully visible)
 * - Wide gradient fade on both edges
 * - Moves from top-left to bottom-right
 */
:root {
  --circuit-wave-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3E%3Cdefs%3E%3ClinearGradient id='fade' x1='0%25' y1='0%25' x2='100%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='black' stop-opacity='0'/%3E%3Cstop offset='15%25' stop-color='black' stop-opacity='0.05'/%3E%3Cstop offset='30%25' stop-color='black' stop-opacity='0.15'/%3E%3Cstop offset='42%25' stop-color='black' stop-opacity='0.4'/%3E%3Cstop offset='48%25' stop-color='black' stop-opacity='0.7'/%3E%3Cstop offset='50%25' stop-color='black' stop-opacity='0.85'/%3E%3Cstop offset='52%25' stop-color='black' stop-opacity='0.7'/%3E%3Cstop offset='58%25' stop-color='black' stop-opacity='0.4'/%3E%3Cstop offset='70%25' stop-color='black' stop-opacity='0.15'/%3E%3Cstop offset='85%25' stop-color='black' stop-opacity='0.05'/%3E%3Cstop offset='100%25' stop-color='black' stop-opacity='0'/%3E%3C/linearGradient%3E%3Cfilter id='blur'%3E%3CfeGaussianBlur stdDeviation='12'/%3E%3C/filter%3E%3C/defs%3E%3Cg transform='rotate(135 200 200)'%3E%3Crect x='-100' y='160' width='600' height='80' fill='url(%23fade)' filter='url(%23blur)'/%3E%3C/g%3E%3C/svg%3E");
}

/* Circuit pattern overlay - sits on top of body background */
.circuit-pattern-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

/* The circuit pattern with animated wavy mask */
.circuit-pattern-overlay::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: var(--circuit-pattern);
  background-repeat: repeat;
  background-size: 256px 256px;
  /* Use SVG mask with gradient blur for soft wavy edges */
  -webkit-mask-image: var(--circuit-wave-mask);
  mask-image: var(--circuit-wave-mask);
  -webkit-mask-size: 300% 300%;
  mask-size: 300% 300%;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  animation: circuit-wave-descend 45s linear infinite;
}

/* Wave moves from top-left to bottom-right */
@keyframes circuit-wave-descend {
  0% {
    -webkit-mask-position: 130% 130%;
    mask-position: 130% 130%;
  }
  100% {
    -webkit-mask-position: -80% -80%;
    mask-position: -80% -80%;
  }
}

/* Utility class for circuit pattern background (static version) */
.circuit-pattern-bg {
  background-color: var(--color-bg-primary);
  background-image: var(--circuit-pattern);
  background-repeat: repeat;
  background-size: 256px 256px;
}
